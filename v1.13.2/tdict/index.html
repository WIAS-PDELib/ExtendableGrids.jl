<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The TDict interface pattern · ExtendableGrids.jl</title><meta name="title" content="The TDict interface pattern · ExtendableGrids.jl"/><meta property="og:title" content="The TDict interface pattern · ExtendableGrids.jl"/><meta property="twitter:title" content="The TDict interface pattern · ExtendableGrids.jl"/><meta name="description" content="Documentation for ExtendableGrids.jl."/><meta property="og:description" content="Documentation for ExtendableGrids.jl."/><meta property="twitter:description" content="Documentation for ExtendableGrids.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ExtendableGrids.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../changes/">Changes</a></li><li><a class="tocitem" href="../adjacency/">Adjacency</a></li><li><a class="tocitem" href="../vectorofconstants/">Vector of constants</a></li><li><a class="tocitem" href="../typehierarchy/">Type hierarchy</a></li><li><a class="tocitem" href="../elementgeometry/">Element geometry</a></li><li><a class="tocitem" href="../shape_specs/">Shape specifications</a></li><li><a class="tocitem" href="../coordinatesystem/">Coordinate systems</a></li><li><a class="tocitem" href="../extendablegrid/">Extendable grid</a></li><li><a class="tocitem" href="../subgrid/">Subgrid</a></li><li><a class="tocitem" href="../more/">Derived adjacencies</a></li><li><a class="tocitem" href="../voronoi/">Voronoi tools</a></li><li><a class="tocitem" href="../assembly/">Assembly support</a></li><li><a class="tocitem" href="../cellfinder/">Search and Interpolation</a></li><li><a class="tocitem" href="../arraytools/">Array tools</a></li><li><a class="tocitem" href="../gridconstructors/">Grid constructors</a></li><li><a class="tocitem" href="../output/">Grid output</a></li><li><a class="tocitem" href="../refinement/">Mesh refinement</a></li><li><a class="tocitem" href="../partitioning/">Grid partitioning</a></li><li><a class="tocitem" href="../regionedit/">Region editing</a></li><li><a class="tocitem" href="../tokenstream/">Token streams</a></li><li><a class="tocitem" href="../binnedpointlist/">BinnedPointList</a></li><li><a class="tocitem" href="../gmsh/">Gmsh interoperability</a></li><li><a class="tocitem" href="../allindex/">Index</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../script_examples/examples1d/">examples1d</a></li><li><a class="tocitem" href="../script_examples/examples2d/">examples2d</a></li><li><a class="tocitem" href="../script_examples/examples3d/">examples3d</a></li><li><a class="tocitem" href="../script_examples/gmsh/">gmsh</a></li><li><a class="tocitem" href="../plutostatichtml_examples/pluto-partitioning/">Partitioning</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>The TDict interface pattern</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The TDict interface pattern</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/WIAS-PDELib/ExtendableGrids.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="The-TDict-interface-pattern"><a class="docs-heading-anchor" href="#The-TDict-interface-pattern">The TDict interface pattern</a><a id="The-TDict-interface-pattern-1"></a><a class="docs-heading-anchor-permalink" href="#The-TDict-interface-pattern" title="Permalink"></a></h1><p>Here we describe the idea behind the data structure used in this package. TDict means: extendable containers with type stable content access and lazy content creation via the Julia type system.</p><h3 id="Problem-to-be-addressed"><a class="docs-heading-anchor" href="#Problem-to-be-addressed">Problem to be addressed</a><a id="Problem-to-be-addressed-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-to-be-addressed" title="Permalink"></a></h3><p>In certain contexts it is desirable to use containers with core components which are user extendable and allow for type stable component access. Moreover, some components are necessary on demand only, so they should be created lazily. Furthermore, there should be a kind of safety protocol which prevents errors from typos in component names etc.</p><p>Julia default data structures do not provide these properties.</p><h4 id="struct"><a class="docs-heading-anchor" href="#struct"><code>struct</code></a><a id="struct-1"></a><a class="docs-heading-anchor-permalink" href="#struct" title="Permalink"></a></h4><ul><li>Julia structs with proper field type annotations guarantee type stability</li><li>Julia structs are not extendable, fields and their types are fixed upon definition</li><li>If we don&#39;t fix types of struct fields they become Any and a source  for type instability</li><li>The situation could be fixed if <code>getfield</code> could be overloaded but it can&#39;t</li></ul><h4 id="Dict"><a class="docs-heading-anchor" href="#Dict"><code>Dict</code></a><a id="Dict-1"></a><a class="docs-heading-anchor-permalink" href="#Dict" title="Permalink"></a></h4><ul><li>Plain Dicts with flexible value types are a source of type instability</li><li>Dicts with strings as keys needs a meta protocol to handle semantics of keys which at the end probably hinges on string comparison which will make things slow</li><li>Dicts with symbols as keys still need this meta protocol</li><li>Same for the implementation of a lazy evaluation protocol</li><li>If a dict contains components of different types, component access will not be typestable</li></ul><h3 id="Proposed-solution:"><a class="docs-heading-anchor" href="#Proposed-solution:">Proposed solution:</a><a id="Proposed-solution:-1"></a><a class="docs-heading-anchor-permalink" href="#Proposed-solution:" title="Permalink"></a></h3><p>Harness the power of the Julia type system: </p><ul><li>Use a struct containing a  Dict with DataType as keys. Every key is a type.</li><li>Use type hierarchies to manage different  value classes</li><li>Use the type system to dispatch between  <code>getindex</code>/<code>setindex!</code> methods for keys</li><li>Extension requires declaring new types, keys can be only existing types almost removing typos as sources for errors</li><li>Lazy extension is managed bye an  <code>instantiate</code> method called by <code>getindex</code> if necessary</li><li>Component access is made type stable by type dispatched<code>getindex</code> methods</li><li>Component insertion is made safe by having  <code>setindex!</code>  calling a <code>veryform</code> method</li></ul><h4 id="Pros"><a class="docs-heading-anchor" href="#Pros">Pros</a><a id="Pros-1"></a><a class="docs-heading-anchor-permalink" href="#Pros" title="Permalink"></a></h4><p>See above ...</p><h4 id="Cons"><a class="docs-heading-anchor" href="#Cons">Cons</a><a id="Cons-1"></a><a class="docs-heading-anchor-permalink" href="#Cons" title="Permalink"></a></h4><ul><li>Implemented using a Dict, so access is inherently slower than access to a component of a struct. Therefore it is not well suited for inner loops.</li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Monday 23 June 2025 08:53">Monday 23 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
