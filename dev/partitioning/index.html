<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Grid partitioning · ExtendableGrids.jl</title><meta name="title" content="Grid partitioning · ExtendableGrids.jl"/><meta property="og:title" content="Grid partitioning · ExtendableGrids.jl"/><meta property="twitter:title" content="Grid partitioning · ExtendableGrids.jl"/><meta name="description" content="Documentation for ExtendableGrids.jl."/><meta property="og:description" content="Documentation for ExtendableGrids.jl."/><meta property="twitter:description" content="Documentation for ExtendableGrids.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ExtendableGrids.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../changes/">Changes</a></li><li><a class="tocitem" href="../adjacency/">Adjacency</a></li><li><a class="tocitem" href="../vectorofconstants/">Vector of constants</a></li><li><a class="tocitem" href="../typehierarchy/">Type hierarchy</a></li><li><a class="tocitem" href="../elementgeometry/">Element geometry</a></li><li><a class="tocitem" href="../shape_specs/">Shape specifications</a></li><li><a class="tocitem" href="../coordinatesystem/">Coordinate systems</a></li><li><a class="tocitem" href="../extendablegrid/">Extendable grid</a></li><li><a class="tocitem" href="../subgrid/">Subgrid</a></li><li><a class="tocitem" href="../more/">Derived adjacencies</a></li><li><a class="tocitem" href="../voronoi/">Voronoi tools</a></li><li><a class="tocitem" href="../assembly/">Assembly support</a></li><li><a class="tocitem" href="../cellfinder/">Search and Interpolation</a></li><li><a class="tocitem" href="../arraytools/">Array tools</a></li><li><a class="tocitem" href="../gridconstructors/">Grid constructors</a></li><li><a class="tocitem" href="../output/">Grid output</a></li><li><a class="tocitem" href="../refinement/">Mesh refinement</a></li><li class="is-active"><a class="tocitem" href>Grid partitioning</a><ul class="internal"><li><a class="tocitem" href="#API-calls"><span>API calls</span></a></li><li><a class="tocitem" href="#Partitioning-algorithms"><span>Partitioning algorithms</span></a></li><li><a class="tocitem" href="#Key-types-for-grid-access"><span>Key types for grid access</span></a></li><li><a class="tocitem" href="#Internal-API"><span>Internal API</span></a></li></ul></li><li><a class="tocitem" href="../regionedit/">Region editing</a></li><li><a class="tocitem" href="../tokenstream/">Token streams</a></li><li><a class="tocitem" href="../binnedpointlist/">BinnedPointList</a></li><li><a class="tocitem" href="../gmsh/">Gmsh interoperability</a></li><li><a class="tocitem" href="../allindex/">Index</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../script_examples/examples1d/">examples1d</a></li><li><a class="tocitem" href="../script_examples/examples2d/">examples2d</a></li><li><a class="tocitem" href="../script_examples/examples3d/">examples3d</a></li><li><a class="tocitem" href="../script_examples/gmsh/">gmsh</a></li><li><a class="tocitem" href="../plutostatichtml_examples/pluto-partitioning/">Partitioning</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Grid partitioning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Grid partitioning</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/j-fu/ExtendableGrids.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Grid-partitioning"><a class="docs-heading-anchor" href="#Grid-partitioning">Grid partitioning</a><a id="Grid-partitioning-1"></a><a class="docs-heading-anchor-permalink" href="#Grid-partitioning" title="Permalink"></a></h1><p>All grids created from ExtendableGrids can be considered to be partitioned such that the neighborhood graph  of the partitions is colored so that operations (FEM/FVM assembly, sparse matrix-vector multiplication with SparseMatrixCSC, ILU preconditioners) on different partitions of the same color can be performed in parallel  without write conflicts in a multithreading environment.</p><p>The default partitioning is trivial: all cells and nodes belong to one partition, and the resulting trivial neighborhood graph is colored with one color.</p><h2 id="API-calls"><a class="docs-heading-anchor" href="#API-calls">API calls</a><a id="API-calls-1"></a><a class="docs-heading-anchor-permalink" href="#API-calls" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partition" href="#ExtendableGrids.partition"><code>ExtendableGrids.partition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">     partition(grid::ExtendableGrid,
               alg::AbstractPartitioningAlgorithm;
               nodes = false,
               keep_nodepermutation = false,
               edges = false )</code></pre><p>Partition cells of <code>grid</code> according to <code>alg</code>, such that the neigborhood graph of partitions is colored in such a way, that all partitions with  a given color can be worked on in parallel.  Cells are renumbered such that cell numbers for a given partition are numbered contiguously. </p><p>Return the resulting grid.</p><p>Useful for parallel FEM assembly and cellwise FVM assembly.</p><p>Keyword arguments:</p><ul><li><code>nodes</code>: if true, induce node partitioning from cell partitioning. Used for node/edgewise FVM assembly.  In addition the resulting partitioning supports parallel matrix-vector products with <code>SparseMatrixCSC</code>. Nodes are renumbered compared to the original grid.</li><li><code>keep_nodepermutation</code>: if true, keep the node permutation with respect to the original grid in <code>grid[</code><a href="#ExtendableGrids.NodePermutation"><code>NodePermutation</code></a><code>]</code>.</li><li><code>edges</code>: if true, induce partitioning of edges from cell partitioning. Used for node/edgewise FVM assembly.  This step creates a number of relatively expensive additional adjacencies.</li></ul><p>Access:</p><ul><li><a href="#ExtendableGrids.pcolors"><code>pcolors</code></a> returns the range of partition colors</li><li><a href="#ExtendableGrids.pcolor_partitions"><code>pcolor_partitions</code></a>  returns the range of partition numbers for a given color</li><li><a href="#ExtendableGrids.partition_cells"><code>partition_cells</code></a> provides the range of cell numbers of a given partition</li><li><a href="#ExtendableGrids.partition_nodes"><code>partition_nodes</code></a> provides the range of node numbers of a given partition</li><li><a href="#ExtendableGrids.partition_edges"><code>partition_edges</code></a> provides the range of edge numbers of a given partition</li></ul><p>A parallel loop over grid cells thus looks like</p><pre><code class="language-julia hljs">for color in pcolors(grid)
    @threads for part in pcolor_partitions(grid, color)
                for cell in partition_cells(grid, part)
                 ...
                end
             end
end</code></pre><p>Without a call to <code>partition</code>, all these functions return trivial data such that the above sample code stays valid.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>partition</code> must be called before obtaining any other adjacencies of a grid.</p></div></div><p>Currently, partitioning does not cover the boundary, boundary cells belong to one big trivial partition.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.pcolors" href="#ExtendableGrids.pcolors"><code>ExtendableGrids.pcolors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pcolors(grid)
</code></pre><p>Return range of all pcolors based on <code>grid[</code><a href="#ExtendableGrids.PColorPartitions"><code>PColorPartitions</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.pcolor_partitions" href="#ExtendableGrids.pcolor_partitions"><code>ExtendableGrids.pcolor_partitions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pcolor_partitions(grid, color)
</code></pre><p>Return range of partitions for given pcolor based on  <code>grid[</code><a href="#ExtendableGrids.PColorPartitions"><code>PColorPartitions</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partition_cells" href="#ExtendableGrids.partition_cells"><code>ExtendableGrids.partition_cells</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition_cells(grid, part)
</code></pre><p>Return range of cells belonging to a given partition <code>grid[</code><a href="#ExtendableGrids.PartitionCells"><code>PartitionCells</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partition_bfaces" href="#ExtendableGrids.partition_bfaces"><code>ExtendableGrids.partition_bfaces</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition_bfaces(grid, part)
</code></pre><p>Return range of boundary faces belonging to a given partition based on <code>grid[</code><a href="#ExtendableGrids.PartitionBFaces"><code>PartitionBFaces</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partition_nodes" href="#ExtendableGrids.partition_nodes"><code>ExtendableGrids.partition_nodes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition_nodes(grid, part)
</code></pre><p>Return range of nodes belonging to a given partition based on <code>grid[</code><a href="#ExtendableGrids.PartitionNodes"><code>PartitionNodes</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partition_edges" href="#ExtendableGrids.partition_edges"><code>ExtendableGrids.partition_edges</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition_edges(grid, part)
</code></pre><p>Return range of edges belonging to a given partition based on <code>grid[</code><a href="#ExtendableGrids.PartitionEdges"><code>PartitionEdges</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_pcolors" href="#ExtendableGrids.num_pcolors"><code>ExtendableGrids.num_pcolors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_pcolors(grid)
</code></pre><p>Return number of partition colors based on <code>grid[</code><a href="#ExtendableGrids.PColorPartitions"><code>PColorPartitions</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_partitions" href="#ExtendableGrids.num_partitions"><code>ExtendableGrids.num_partitions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_partitions(grid)
</code></pre><p>Return number of partitions based on <code>grid[</code><a href="#ExtendableGrids.PartitionCells"><code>PartitionCells</code></a><code>]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_partitions_per_color" href="#ExtendableGrids.num_partitions_per_color"><code>ExtendableGrids.num_partitions_per_color</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_partitions_per_color(grid)
</code></pre><p>Return a vector containing the number of partitions for each of the colors of the grid partitioning. These define the maximum number of parallel threads for each color.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_nodes_per_partition" href="#ExtendableGrids.num_nodes_per_partition"><code>ExtendableGrids.num_nodes_per_partition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_nodes_per_partition(grid)
</code></pre><p>Return a vector containing the number of nodes for each of the partitions of the grid partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_edges_per_partition" href="#ExtendableGrids.num_edges_per_partition"><code>ExtendableGrids.num_edges_per_partition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_edges_per_partition(grid)
</code></pre><p>Return a vector containing the number of nodes for each of the partitions of the grid partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.num_cells_per_color" href="#ExtendableGrids.num_cells_per_color"><code>ExtendableGrids.num_cells_per_color</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">num_cells_per_color(grid)
</code></pre><p>Return a vector containing the number of cells for each of the colors of the grid partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.check_partitioning" href="#ExtendableGrids.check_partitioning"><code>ExtendableGrids.check_partitioning</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">check_partitioning(grid; 
                   verbose=true, 
                   cellpartonly=false)</code></pre><p>Check correctness of cell partitioning, necessesary for parallel assembly:</p><ul><li>Check if every node belongs to one of the cell partitions</li><li>Check if no node belongs to two cell partitions of the same color at once</li></ul><p>If <code>cellpartonly==false</code> check correctness of node partitioning necessary for parallel sparse matrix multiplication and ILU preconditioning</p><ul><li>Check if no node belongs to two node partitions of the same color at once</li><li>Check if no node is a neighbor of nodes from two node partitions of the same color</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><h2 id="Partitioning-algorithms"><a class="docs-heading-anchor" href="#Partitioning-algorithms">Partitioning algorithms</a><a id="Partitioning-algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Partitioning-algorithms" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.AbstractPartitioningAlgorithm" href="#ExtendableGrids.AbstractPartitioningAlgorithm"><code>ExtendableGrids.AbstractPartitioningAlgorithm</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractPartitioningAlgorithm</code></pre><p>Abstract super type for partitioning algorithms</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.TrivialPartitioning" href="#ExtendableGrids.TrivialPartitioning"><code>ExtendableGrids.TrivialPartitioning</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TrivialPartitioning &lt;: AbstractPartitioningAlgorithm</code></pre><p>Trivial partitioning: all grid cells belong to single partition number 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PlainMetisPartitioning" href="#ExtendableGrids.PlainMetisPartitioning"><code>ExtendableGrids.PlainMetisPartitioning</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct PlainMetisPartitioning &lt;: AbstractPartitioningAlgorithm</code></pre><p>Subdivide grid into <code>npart</code> partitions using <code>Metis.partition</code> and color the resulting partition neigborhood graph. This requires to import Metis.jl in order to trigger the corresponding extension.</p><p>This algorithm allows to control  the overall number of partitions. The number of partitions per color comes from the subsequent partition graph coloring and in the moment cannot be controled.</p><p>Parameters: </p><ul><li><code>npart::Int64</code>: Number of partitions (default: 20)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.RecursiveMetisPartitioning" href="#ExtendableGrids.RecursiveMetisPartitioning"><code>ExtendableGrids.RecursiveMetisPartitioning</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct RecursiveMetisPartitioning &lt;: AbstractPartitioningAlgorithm</code></pre><p>Subdivide grid into <code>npart</code> partitions using <code>Metis.partition</code> and calculate cell separators from this partitioning. The initial partitions  get color 1, and the separator gets color 2. This is continued recursively with partitioning of the separator.  </p><p>This algorithm allows to control  the number of partitions in color 1 which coorespond to the bulk of the work. </p><p>Parameters: </p><ul><li><p><code>npart::Int64</code>: Number of color 1 partitions (default: 4)</p></li><li><p><code>maxdepth::Int64</code>: Recursion depth (default: 1)</p></li><li><p><code>separatorwidth::Int64</code>: Separator width  (default: 2)</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><h2 id="Key-types-for-grid-access"><a class="docs-heading-anchor" href="#Key-types-for-grid-access">Key types for grid access</a><a id="Key-types-for-grid-access-1"></a><a class="docs-heading-anchor-permalink" href="#Key-types-for-grid-access" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PColorPartitions" href="#ExtendableGrids.PColorPartitions"><code>ExtendableGrids.PColorPartitions</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type PColorPartitions &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing colors of partitions. These correspond to  a coloring of the neigborhood graphs of partitions such that  operations (e.g. FEM assembly) on partitions of a given color can  be performed in parallel.</p><p><code>grid[PColorPartitions]</code> returns an integer vector describing  the partition colors (&quot;pcolors&quot;) of a grid.  Let <code>p=grid[PColorPartitions]</code>. Then all partitions with numbers <code>i ∈ p[c]:p[c+1]-1</code>  have &quot;color&quot; <code>c</code>. See also <a href="#ExtendableGrids.pcolors"><code>pcolors</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PartitionCells" href="#ExtendableGrids.PartitionCells"><code>ExtendableGrids.PartitionCells</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type PartitionCells &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing the cells of a given partition.</p><p><code>grid[PartitionCells]</code> returns an integer vector describing  the cells of a partition  given by its number. Let <code>pc=grid[PartitionCells]</code>. Then all cells with index <code>i ∈ pc[p]:pc[p+1]-1</code>  belong to partition p.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PartitionBFaces" href="#ExtendableGrids.PartitionBFaces"><code>ExtendableGrids.PartitionBFaces</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type PartitionBFaces &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing the bondary faces of a given partition.</p><p><code>grid[PartitionBFaces]</code> returns an integer vector describing  the boundary faces of a partition  given by its number. Let <code>pc=grid[PartitionCells]</code>. Then all cells with index <code>i ∈ pc[p]:pc[p+1]-1</code>  belong to partition p.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PartitionNodes" href="#ExtendableGrids.PartitionNodes"><code>ExtendableGrids.PartitionNodes</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type PartitionNodes &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing the nodes of a given partition.</p><p><code>grid[PartitionNodes]</code> returns an integer vector describing  the nodes of a partition  given by its number. Let <code>pn=grid[PartitionNodes]</code>. Then all nodes with index <code>i ∈ pn[p]:pn[p+1]-1</code>  belong to partition p.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.PartitionEdges" href="#ExtendableGrids.PartitionEdges"><code>ExtendableGrids.PartitionEdges</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type PartitionEdges &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing the edges of a given partition.</p><p><code>grid[PartitionEdges]</code> returns an integer vector describing  the edges of a partition  given by its number. Let <code>pe=grid[PartitionEdges]</code>. Then all edges with index <code>i ∈ pe[p]:pe[p+1]-1</code>  belong to partition p.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.NodePermutation" href="#ExtendableGrids.NodePermutation"><code>ExtendableGrids.NodePermutation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type NodePermutation &lt;: AbstractGridIntegerArray1D</code></pre><p>Key type describing the permutation of the nodes of a partitioned grid with respect  to the unpartitioned origin.</p><p>If <code>pgrid</code> is the partitioned grid and <code>grid</code> is the unpartitioned origin, then </p><p><code>pgrid[Coordinates][:,pgrid[NodePermutation]]==grid[Coordinates]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><h2 id="Internal-API"><a class="docs-heading-anchor" href="#Internal-API">Internal API</a><a id="Internal-API-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-API" title="Permalink"></a></h2><p>These functions &amp; methods are neither exported nor public.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.trivial_partitioning!" href="#ExtendableGrids.trivial_partitioning!"><code>ExtendableGrids.trivial_partitioning!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">trivial_partitioning!(grid)
</code></pre><p>(internal) Create trivial partitioning: the whole grid is partition #1 with just one color.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.trivial_partitioning" href="#ExtendableGrids.trivial_partitioning"><code>ExtendableGrids.trivial_partitioning</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">trivial_partitioning(npart, nitems)
</code></pre><p>(internal) Create a trivial partitioning such that all items fall in the first of nparts</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PColorPartitions}}" href="#ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PColorPartitions}}"><code>ExtendableGrids.instantiate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">instantiate(grid::ExtendableGrid, ::Type{PColorPartitions})</code></pre><p>If not given otherwise, instantiate partition data with trivial partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionCells}}" href="#ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionCells}}"><code>ExtendableGrids.instantiate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">instantiate(grid::ExtendableGrid, ::Type{PartitionCells})</code></pre><p>If not given otherwise, instantiate partition data with trivial partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionBFaces}}" href="#ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionBFaces}}"><code>ExtendableGrids.instantiate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">instantiate(grid::ExtendableGrid, ::Type{PartitionBFaces})</code></pre><p>If not given otherwise, instantiate partition data with trivial partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionNodes}}" href="#ExtendableGrids.instantiate-Tuple{ExtendableGrid, Type{PartitionNodes}}"><code>ExtendableGrids.instantiate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">instantiate(grid::ExtendableGrid, ::Type{PartitionNodes})</code></pre><p>If not given otherwise, instantiate partition data with trivial partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.partgraph" href="#ExtendableGrids.partgraph"><code>ExtendableGrids.partgraph</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partgraph(cellpartitions, ncellpartitions, cellcelladj)
</code></pre><p>(internal) Create neigbourhood graph for given partitioning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.dopartition" href="#ExtendableGrids.dopartition"><code>ExtendableGrids.dopartition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dopartition(grid, alg)
</code></pre><p>(Internal utility function) Core function for partitioning grid cells which dispatches over partitioning algorithms. Partitioning extensions should add methods to this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.reorder_cells" href="#ExtendableGrids.reorder_cells"><code>ExtendableGrids.reorder_cells</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">reorder_cells(
    grid,
    cellpartitions,
    ncellpartitions,
    colpart
)
</code></pre><p>(Internal utility function) Create cell permutation such that  all cells belonging to one partition are numbered contiguously, return grid with reordered cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.induce_node_partitioning!" href="#ExtendableGrids.induce_node_partitioning!"><code>ExtendableGrids.induce_node_partitioning!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">induce_node_partitioning!(
    grid,
    cn,
    nc;
    trivial,
    keep_nodepermutation
)
</code></pre><p>(internal) Induce node partitioning from cell partitioning of <code>grid</code>. The algorithm assumes that nodes get the partition number from the partition numbers of the cells having this node in common. If these are differnt, the highest number is taken.</p><p>Node partitioning should support parallel matrix-vector products with <code>SparseMatrixCSC</code>. The current algorithm assumes that nodes get the partition number from the partition numbers of the cells having this node in common. If these are differnt, the highest number is taken.</p><p>Simply inducing node partition numbers from cell partition numbers does not always fulfill the  condition that there is no node which is neigbour of nodes from two different partition with the same color.</p><p>This situation is detected and corrected by joining respective critical partitions, sacrificing a bit of  parallel efficiency for correctness.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ExtendableGrids.induce_edge_partitioning!" href="#ExtendableGrids.induce_edge_partitioning!"><code>ExtendableGrids.induce_edge_partitioning!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">induce_edge_partitioning!(grid; trivial)
</code></pre><p>(internal) Induce edge partitioning from cell partitioning of <code>grid</code>. The algorithm assumes that nodes get the partition number from the partition numbers of the cells having this node in common. If these are differnt, the highest number is taken.</p><p>This method triggers creation of rather complex edge information and should be called only if this information is really necessary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/j-fu/ExtendableGrids.jl">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../refinement/">« Mesh refinement</a><a class="docs-footer-nextpage" href="../regionedit/">Region editing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Monday 22 July 2024 20:56">Monday 22 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
